# 🚲 따릉이 수요 예측 및 패턴 분석
> **요일별·날씨별 패턴 분석을 통한 서울시 공공자전거(따릉이) 단기 대여량 예측 프로젝트**

## 📌 프로젝트 개요
이 프로젝트는 서울시 공공자전거 '따릉이'의 이용 데이터를 분석하여 요일 및 날씨(기온, 강수량 등)에 따른 수요 패턴을 파악하고, 이를 바탕으로 단기 대여량을 예측하는 머신러닝 모델을 구축하는 것을 목표로 합니다.

## 📂 데이터셋 (Data Source)
본 분석에는 **2024년 1월 1일 ~ 2024년 12월 31일**의 데이터가 사용되었습니다.

*   **서울 공공자전거 이용정보 (일별)**: [서울 열린데이터 광장](https://data.seoul.go.kr/)
*   **기상관측 데이터 (종관기상관측 ASOS)**: [기상자료개방포털](https://data.kma.go.kr/)
    *   활용 지표: 평균기온, 일강수량, 평균 풍속, 평균 상대습도, 일 최심적설, 평균 전운량

## 🛠 데이터 전처리 (Preprocessing)
1.  **데이터 병합**: 날짜를 기준으로 자전거 이용 정보와 기상 데이터를 병합하여 `final_dataset_detailed.csv` 구축
2.  **수치 추출**: 공공자전거 데이터 내 불필요한 문자를 제거하고 이용량(숫자) 데이터만 추출
3.  **범주화 (시각화용)**: 기상 데이터(비, 눈, 구름 등)는 수치형이지만, 시각화 시 직관적인 이해를 돕기 위해 "비", "눈" 등의 라벨을 추가 (학습에는 수치형 데이터 사용)

### 💻 Feature Engineering
요일 및 계절 데이터가 문자열로 되어 있어 모델 학습이 불가능한 문제를 해결하기 위해, 다음과 같이 수치형 데이터로 변환하고 파생 변수를 생성했습니다.

```python
# 날짜 컬럼 처리 및 파생 변수 생성
if 'date' in df.columns:
    df['date'] = pd.to_datetime(df['date'])
    df['month'] = df['date'].dt.month
    
    # 1. 요일 수치화 (0:월요일 ~ 6:일요일)
    df['weekday_num'] = df['date'].dt.weekday 
    
    # 2. 요일 매핑 (시각화용)
    df['weekday'] = df['date'].dt.day_name().map({
        'Monday':'월', 'Tuesday':'화', 'Wednesday':'수', 
        'Thursday':'목', 'Friday':'금', 'Saturday':'토', 'Sunday':'일'
    })
    
    # 3. 주말 여부 (0:평일, 1:주말)
    df['is_weekend'] = df['weekday_num'].apply(lambda x: 1 if x >= 5 else 0)
    
    # 4. 계절 분류 (1:봄, 2:여름, 3:가을, 4:겨울)
    df['season'] = df['month'].apply(lambda x: 1 if x in [3,4,5] else (2 if x in [6,7,8] else (3 if x in [9,10,11] else 4)))
    
    df = df.fillna(0)
```

## 📊 시각화 및 분석 결과 (Analysis)

### 1. 요일 및 계절별 대여량 패턴
![요일 및 계절별 패턴](Result/시각화%20자료1.png)
*   **주말 vs 평일**: 주말에는 평균 대여량이 크게 하락하는 모습을 보입니다. 이는 따릉이가 레저용보다 **평일 출퇴근 및 등하교 이동 수단**으로 주로 활용됨을 시사합니다.
*   **계절 영향**: 봄, 여름, 가을의 평균 대여량은 비슷하나, **겨울(12월~3월)**에는 추운 날씨의 영향으로 이용자가 급격히 감소합니다.

### 2. 날씨 요소와 대여량의 상관관계
![날씨 영향](Result/시각화%20자료2.png)
*   **기온**: 기온이 상승할수록 이용자 수가 뚜렷하게 증가하는 양상을 보입니다.
*   **기상 악화**: 비나 눈이 오는 날에는 총 이용자 수가 확실하게 줄어듭니다.

---

## 🤖 모델 성능 평가 (Modeling)

### 모델별 성능 비교
![모델 성능 비교](Result/모델성능비교.png)

예측 정확도를 높이기 위해 4가지 모델을 비교 분석했습니다.
*   **비교 모델**: LightGBM, XGBoost, Random Forest, Linear Regression
*   **결과**: 비교 결과 **Random Forest** 기법이 가장 우수한 성능을 보였습니다.

### 실제값 vs 예측값 비교 (Random Forest)
![실제 vs 예측](Result/실제%20vs%20예측.png)
*   **빨간 선**: 실제 대여량 / **파란 점**: 모델 예측값
*   파란 점들이 빨간 실선(실제값)을 중심으로 밀집되어 분포하는 것으로 보아, 모델이 실제 대여량의 패턴을 상당히 잘 학습했음을 확인할 수 있습니다.

## 📝 결론 (Conclusion)
1.  따릉이는 **주말보다 평일**에 더 많은 사람이 이용하며, 주요 이동 수단으로 자리 잡았습니다.
2.  **기상 조건(비, 눈, 기온)**은 대여량에 결정적인 영향을 미칩니다.
3.  다양한 머신러닝 모델 중 **Random Forest**가 본 데이터셋에서 가장 뛰어난 예측 성능을 보였습니다.
